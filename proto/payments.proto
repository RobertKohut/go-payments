syntax = "proto3";

package payments;

option go_package = "github.com/robertkohut/go-payments/proto/payments";

message Customer {
	int64 id = 1;
	string name = 2;
	int64 gateway_id = 3;
	int64 source_id = 4;
	int64 account_id = 5;
	string ext_id = 6;
	repeated Card cards = 7;
	int64 flags = 8;
}

message Card {
	int64 id = 1;
	string ext_id = 2;
	string brand = 3;
	string last4 = 4;
	uint32 exp_month = 5;
	uint32 exp_year = 6;
}

service PaymentService {
	rpc CreateCustomer(CreateCustomerRequest) returns (CreateCustomerResponse) {}
	rpc GetCustomerById(GetCustomerByIdRequest) returns (GetCustomerByIdResponse) {}
	rpc AddCustomerPaymentMethod(AddCustomerPaymentMethodRequest) returns (AddCustomerPaymentMethodResponse) {}
	rpc RemoveCustomerPaymentMethod(RemoveCustomerPaymentMethodRequest) returns (RemoveCustomerPaymentMethodResponse) {}
}

message CreateCustomerRequest {
	int64 source_id = 1;
	int64 org_id = 2;
	int64 account_id = 3;
	string name = 4;
}

message CreateCustomerResponse {
	Customer customer = 1;
}

message GetCustomerByIdRequest {
	int64 source_id = 1;
	int64 account_id = 2;
}

message GetCustomerByIdResponse {
	Customer customer = 1;
}

message AddCustomerPaymentMethodRequest {
	int64 source_id = 1;
	int64 account_id = 2;
	Card card = 3;
}

message AddCustomerPaymentMethodResponse {
	bool success = 1;
}

message RemoveCustomerPaymentMethodRequest {
	int64 source_id = 1;
	int64 account_id = 2;
	int64 card_id = 3;
}

message RemoveCustomerPaymentMethodResponse {
	bool success = 1;
}
